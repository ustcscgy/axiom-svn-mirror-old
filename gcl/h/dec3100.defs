# /* copyright W. Schelter 1990 */
# Machine dependent makefile definitions for dec 3100
# gcl 505 worked under Ultrix V3.1C-0 (Rev. 42) with speed=0. -ie no -O
# for the lisp files.

LBINDIR=/usr/local/bin

OFLAG   =
LIBS    = -lm
ODIR_DEBUG= 
NULLFILE = ../h/twelve_null
SHELL=/bin/sh

# .IGNORE:

# This CC string will be used for compilation of the system,
# and also in the compiler::*cc* variable for later compilation of
# lisp files.

# also defined in `machine'.h file
# The one here must be >= the one in the .h file.
# It must be a multiple of 0x400000 greater that 0x400000 the
# default text start.
DBEGIN= c00000

# If you don't plan on linking in a lot of other stuff
# like maxima, you can increase the -G 8 to -G 800 or so.
# That should be a bit faster..
# We have replaced -DVOL=volatile with -DVOL= since in ultrix 4.2
# the volatile declaration is not correctly implemented.   Hopefully
# it is not required there.

CC = cc -DVOL= -Olimit 798 -G 8 -I${GCLDIR}/o  -I/usr/include/bsd
LDCC = cc -Wl,-D -Wl,${DBEGIN}


# Enable the fastloading mechanism which does not use ld -A
# requires c/rel_.. machine dependent code.

# RSYM  = rsym
# SFASL = $(ODIR)/sfasl.o

# When using SFASL it is good to have (si::build-symbol-table)
# INITFORM=(si::build-symbol-table)
# incremental loading with -A requires -G 0
# INITFORM=(setq compiler::*cc* "cc -DVOL=volatile -G 0 ")
# until volatile works on this machine leave it out.
INITFORM=(setq compiler::*cc* "cc -DVOL= -G 0 ")

# Use symbolic links
SYMB=-s

MPFILES= ${MPDIR}/mpi.o ${MPDIR}/lo-sgi4d.o ${MPDIR}/libmport.a

RANLIB= ar lts

