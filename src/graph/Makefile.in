viewman_stamp = viewman/stamp
Gdraws_stamp = Gdraws/stamp
view2D_stamp = view2D/stamp
view3D_stamp = view3D/stamp
viewAlone_stamp = viewAlone/stamp

DIRS=viewmandir Gdrawsdir view2Ddir view3Ddir viewAlonedir

SUBDIRS = Gdraws viewman view2D view3D viewAlone

pamphlets = fileformats.pamphlet Makefile.pamphlet
IN=$(axiom_src_srcdir)/graph
MID=${INT}/graph/parabola

subdir = src/graph/

pamphlets = Makefile.pamphlet


all: all-subdirs $(MID)/data $(MID)/graph0
	$(STAMP) stamp
	@ echo 24 finished ${IN}

.PHONY: all-subdirs
all-subdirs: all-subdirs.pre all-subdirs.rest

.PHONY: all-subdirs.pre
all-subdirs.pre:
	-rm -f stamp

.PHONY: all-subdirs.rest
all-subdirs.rest: all-subdirs.pre $(Gdraws_stamp) $(viewman_stamp) \
		  $(view2D_stamp) $(view3D_stamp) $(viewAlone_stamp)


$(viewman_stamp):
	@ echo 1 making $(axiom_src_srcdir)/graph/viewman
	@ mkdir -p ${INT}/graph/viewman
	@ mkdir -p ${OBJ}/${SYS}/graph/viewman
	@ mkdir -p ${OBJ}/${SYS}/lib
	@ cd viewman && ${ENV} ${MAKE}
$(Gdraws_stamp): 
	@echo 5 making $(axiom_src_srcdir)/graph/Gdraws
	@mkdir -p ${INT}/graph/Gdraws
	@mkdir -p ${OBJ}/${SYS}/graph/Gdraws
	@ cd Gdraws && ${ENV} ${MAKE}
$(view3D_stamp):
	@echo 9 making $(axiom_src_srcdir)/graph/view3D
	@mkdir -p ${INT}/graph/view3D
	@mkdir -p ${OBJ}/${SYS}/graph/view3D
	@mkdir -p ${OBJ}/${SYS}/lib
	@mkdir -p ${OBJ}/${SYS}/graph/Gdraws
	@ cd view3D && ${ENV} ${MAKE}
$(view2D_stamp): 
	@echo 13 making $(axiom_src_srcdir)/graph/view2D
	@mkdir -p ${INT}/graph/view2D
	@mkdir -p ${OBJ}/${SYS}/graph/view2D
	@mkdir -p ${OBJ}/${SYS}/lib
	@ cd view2D && ${ENV} ${MAKE}
$(viewAlone_stamp):
	@echo 17 making $(axiom_src_srcdir)/graph/viewAlone
	@mkdir -p ${INT}/graph/viewAlone
	@mkdir -p ${OBJ}/${SYS}/graph/viewAlone
	@ cd viewAlone && ${ENV} ${MAKE}


$(MID)/data $(MID)/graph0: $(srcdir)/fileformats.pamphlet
	$(axiom_build_document) --tangle=`basename $@` --output=$@ $<


mostlyclean-local:

clean-local: mostlyclean-local
	-rm -f $(MID)/data $(MID)/graph0

distclean-local: clean-local

