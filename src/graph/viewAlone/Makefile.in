IN=	${SRC}/graph/viewAlone
MIDINT=	${INT}/graph/viewAlone
MIDOBJ=	${OBJ}/${SYS}/graph/viewAlone
OUT=	${MNT}/${SYS}/bin
DOC=    ${MNT}/${SYS}/doc/src/graph

# local include files shared by graphics
LINC=	${SRC}/graph/include

# global include files shared by everyone
GINC=	${SRC}/include


DOCFILES= ${DOC}/viewAlone.c.dvi ${DOC}/spoonComp.c.dvi \
          ${DOC}/spoon2D.c.dvi 

CFLAGS = ${CCF} ${AXIOM_X11_CFLAGS} -I${IN} -I${LINC} -I${GINC} 
LDFLAGS= ${AXIOM_X11_LDFLAGS}

OBJS=  ${MIDOBJ}/viewAlone.o ${MIDOBJ}/spoonComp.o ${MIDOBJ}/spoon2D.o 

HEADERS= ${IN}/viewAlone.h     ${LINC}/component.h ${LINC}/view2D.h  \
         ${LINC}/view3D.h      ${LINC}/tube.h      ${LINC}/actions.h \
         ${LINC}/viewCommand.h 

all: ${OBJS} ${OUT}/viewAlone ${DOCFILES}
	@echo 12 finished ${IN}

${OUT}/viewAlone: $(OBJS)  ${OBJ}/${SYS}/lib/util.o
	@ echo 1 linking viewAlone
	@ ${CC} $(OBJS) ${OBJ}/${SYS}/lib/util.o -o ${OUT}/viewAlone ${LDFLAGS}


${MIDINT}/viewAlone.c: ${IN}/viewAlone.c.pamphlet
	@ echo 2 making ${MIDINT}/viewAlone.c from ${IN}/viewAlone.c.pamphlet
	@ ( cd ${MIDINT} ; \
	${TANGLE} ${IN}/viewAlone.c.pamphlet >viewAlone.c )

${MIDOBJ}/viewAlone.o: ${HEADERS} ${MIDINT}/viewAlone.c
	@ echo 3 making ${MIDOBJ}/viewAlone.o from ${MIDINT}/viewAlone.c
	@ ( cd ${MIDOBJ} ; ${CC} -c ${CFLAGS} ${MIDINT}/viewAlone.c )

${DOC}/viewAlone.c.dvi: ${IN}/viewAlone.c.pamphlet ${DOC}/axiom.sty
	@echo 4 making ${DOC}/viewAlone.c.dvi from ${IN}/viewAlone.c.pamphlet 
	@(cd ${DOC} ; \
	cp ${IN}/viewAlone.c.pamphlet ${DOC} ; \
	${DOCUMENT} ${NOISE} viewAlone.c ; \
	rm -f ${DOC}/viewAlone.c.pamphlet ; \
	rm -f ${DOC}/viewAlone.c.tex ; \
	rm -f ${DOC}/viewAlone.c )


${MIDINT}/spoonComp.c: ${IN}/spoonComp.c.pamphlet
	@ echo 5 making ${MIDINT}/spoonComp.c from ${IN}/spoonComp.c.pamphlet
	@ ( cd ${MIDINT} ; \
	${TANGLE} ${IN}/spoonComp.c.pamphlet >spoonComp.c )

${MIDOBJ}/spoonComp.o: ${HEADERS} ${MIDINT}/spoonComp.c
	@ echo 6 making ${MIDOBJ}/spoonComp.o from ${MIDINT}/spoonComp.c
	@ ( cd ${MIDOBJ} ; ${CC} -c ${CFLAGS} ${MIDINT}/spoonComp.c )

${DOC}/spoonComp.c.dvi: ${IN}/spoonComp.c.pamphlet ${DOC}/axiom.sty
	@echo 7 making ${DOC}/spoonComp.c.dvi from ${IN}/spoonComp.c.pamphlet 
	@(cd ${DOC} ; \
	cp ${IN}/spoonComp.c.pamphlet ${DOC} ; \
	${DOCUMENT} ${NOISE} spoonComp.c ; \
	rm -f ${DOC}/spoonComp.c.pamphlet ; \
	rm -f ${DOC}/spoonComp.c.tex ; \
	rm -f ${DOC}/spoonComp.c )


${MIDINT}/spoon2D.c: ${IN}/spoon2D.c.pamphlet
	@ echo 8 making ${MIDINT}/spoon2D.c from ${IN}/spoon2D.c.pamphlet
	@ ( cd ${MIDINT} ; \
	${TANGLE} ${IN}/spoon2D.c.pamphlet >spoon2D.c )

${MIDOBJ}/spoon2D.o: ${HEADERS} ${MIDINT}/spoon2D.c
	@ echo 9 making ${MIDOBJ}/spoon2D.o from ${MIDINT}/spoon2D.c
	@ ( cd ${MIDOBJ} ; ${CC} -c ${CFLAGS} ${MIDINT}/spoon2D.c )

${DOC}/spoon2D.c.dvi: ${IN}/spoon2D.c.pamphlet ${DOC}/axiom.sty
	@echo 10 making ${DOC}/spoon2D.c.dvi from ${IN}/spoon2D.c.pamphlet 
	@(cd ${DOC} ; \
	cp ${IN}/spoon2D.c.pamphlet ${DOC} ; \
	${DOCUMENT} ${NOISE} spoon2D.c ; \
	rm -f ${DOC}/spoon2D.c.pamphlet ; \
	rm -f ${DOC}/spoon2D.c.tex ; \
	rm -f ${DOC}/spoon2D.c )


${DOC}/axiom.sty: ${SRC}/doc/axiom.sty.pamphlet
	@ echo 11 making ${DOC}/axiom.sty from ${SRC}/doc/axiom.sty.pamphlet
	@(cd ${DOC} ; \
	cp ${SRC}/doc/axiom.sty.pamphlet ${DOC} ; \
	${TANGLE} -Raxiom.sty axiom.sty.pamphlet >axiom.sty ; \
	rm -f ${DOC}/axiom.sty.pamphlet )
 

clean: 
	@ echo 13 cleaning ${IN}/viewAlone

document: 
	@ echo 14 documenting ${IN}/viewAlone

