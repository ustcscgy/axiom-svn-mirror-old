IN=${SRC}/etc
MID=${OBJ}/${SYS}/etc
DOC=${INT}/doc/src/etc
INTERPSYS=$(axiom_build_bindir)/interpsys

subdir = src/etc/

pamphlets = asq.c.pamphlet


all: all-ax

all-ax: $(axiom_targetdir)/algebra/*.daase $(axiom_target_bindir)/asq \
		$(axiom_target_libdir)/summary \
		$(axiom_target_libdir)/copyright \
		$(axiom_target_bindir)/axiom
	@echo 6 finished $(builddir)
	-rm -f stamp
	$(STAMP) stamp

$(axiom_targetdir)/algebra/*.daase: ${INT}/algebra/*.NRLIB/code.o
	@ echo 4 rebuilding databases...
	@ cp $(axiom_src_docdir)/gloss.text ${INT}/algebra
	@ cp $(axiom_src_docdir)/gloss.text ${INT}/algebra
	@ cp $(axiom_src_docdir)/topics.data ${INT}/algebra
	@ cp $(axiom_src_docdir)/topics.data ${INT}/algebra
	@ (cd ${INT}/algebra ; \
           echo ')lisp (make-databases "" nil)' | ${INTERPSYS} )
	@ $(INSTALL_DATA) ${INT}/algebra/*.daase $(axiom_targetdir)/algebra

$(axiom_target_bindir)/asq: ${MID}/asq.c
	@echo 4 making $(axiom_target_bindir)/asq from ${MID}/asq.c
	@( cd ${MID} ; ${CC} ${CCF} -o asq asq.c )
	@ $(INSTALL_PROGRAM) ${MID}/asq $(axiom_target_bindir)

${MID}/asq.c: $(srcdir)/asq.c.pamphlet
	$(axiom_build_document) --tangle --output=$@ $<
$(axiom_target_libdir)/summary: $(srcdir)/summary
	$(INSTALL_DATA) $< $@ 

$(axiom_target_libdir)/copyright: $(srcdir)/copyright
	$(INSTALL_DATA) $< $@ 

$(axiom_target_bindir)/axiom: $(srcdir)/axiom
	@echo 1 making $@ from $<
	@ $(INSTALL_SCRIPT) $< $@
	@chmod +x $(axiom_target_bindir)/axiom


mostlyclean-local: ;

clean-local: mostlyclean-local ;

distclean-local: clean-local ;
